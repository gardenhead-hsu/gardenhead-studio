@echo off
REM -- Netlify 網站一鍵部署腳本 (適用於 Windows/Git Bash) --

REM ----------------------------------------------------
REM 步驟 1: 變更設定
REM ----------------------------------------------------
REM 在執行此腳本前，請先在 index.html 或其他檔案中完成您的修改。

REM 提示用戶輸入提交訊息
set /p commit_msg="請輸入本次提交的說明訊息 (例如: feat: Add new project link): "

REM ----------------------------------------------------
REM 步驟 2: Git 追蹤與提交
REM ----------------------------------------------------

echo.
echo ----------------------------------------------------
echo 1. 正在將所有變更加入 Git 追蹤...
git add .

echo.
echo 2. 正在提交變更...
git commit -m "%commit_msg%"

REM 檢查是否有成功提交 (如果沒有變更檔案，commit 會失敗)
if errorlevel 1 (
    echo.
    echo [警告] 沒有偵測到檔案變更，請確認您已儲存檔案。
    goto :end
)

REM ----------------------------------------------------
REM 步驟 3: 推送至 GitHub (觸發 Netlify 自動部署)
REM ----------------------------------------------------

echo.
echo 3. 正在推送到 GitHub (將會要求輸入 GitHub 憑證)...
git push origin main

REM 檢查 push 是否成功
if errorlevel 1 (
    echo.
    echo [錯誤] 推送失敗，請檢查您的網路連線或 GitHub 憑證。
) else (
    echo.
    echo ----------------------------------------------------
    echo ✅ 部署成功!
    echo Netlify 已自動偵測到變更並開始建構。
    echo 數秒後您的網站將會更新。
    echo ----------------------------------------------------
)

:end
echo.
pause